<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
</head>
<body>
  <script>
    // 测试看是否是json字符串
    function isJSON(str) {
      if (typeof str == 'string') {
          try {
              var obj=JSON.parse(str);
              console.log(obj,!!obj);
              if (obj) return true;
          } catch(e) {
              return false;
          }
      }
    } 
    // 学会try catch的用法
    var a = '{"a":1}'
    // console.log(isJSON(a));
    function get (key, isEncry=true) {
      try {
        var content = window.localStorage.getItem(key)
        if (!!content) {
          if (isJSON(content) && isEncry) { // 此行逻辑啥目的，想不通？
            localStorage.remove(key)
            return null
          } else {
            return isEncry ? JSON.parse(decryptByDES(content)) : JSON.parse(content)
          }
        }
        return null
      } catch (err) {
        return null
      }
    }
    var value = "你好"
    var len = value.match(/[\u4e00-\u9fa5]/g)
    var realLen = len ? len.length * 2 + (value.length - len.length) : value.length
    console.log(len,'len.length');
    console.log(value.length,'value.length');
    console.log(realLen,'realLen');
  </script>
</body>

</html>