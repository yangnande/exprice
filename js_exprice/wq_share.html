<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>h5页面实现微信分享</title>
</head>
<body>
  <div class="test">
    测试页面
  </div>
  <script src="https://res.wx.qq.com/open/js/jweixin-1.2.0.js"></script>
  <script type="text/javascript" src="../public/js/vconsole.min.js"></script>
  <script>
    // wxShare ()
    // function wxShare () {
    //   // 当微信内置浏览器完成内部初始化后会触发WeixinJSBridgeReady事件。
    //   if (typeof WeixinJSBridge === 'undefined') { // 安卓
    //     if (document.addEventListener) {
    //       document.addEventListener('WeixinJSBridgeReady', shareWxa.bind(this), false)
    //     }
    //   } else {  // ios
    //     shareWxa()
    //   }
    // }
    shareWxa ()
    function shareWxa () {
      /* eslint-disable */
      // console.log(WeixinJSBridge, 'WeixinJSBridge')
      console.log(wx, 'wx')
      // let obj = {
      //       img_url: shareimg3,
      //       link: this.shareUrl,
      //       img_width: "120",
      //       img_height: "120",
      //       //desc这个属性要加上，虽然不会显示，但是不加暂时会导致无法转发至朋友圈，
      //       desc: '我是内容',
      //       title: '我是标题'
      //   }
        // 分享到朋友圈
        // WeixinJSBridge.on("menu:share:timeline", function() {
        //     WeixinJSBridge.invoke("shareTimeline", obj, function(res) {
        //         WeixinJSBridge.log(res.err_msg)
        //     });
        // })
        // 分享给朋友
        // WeixinJSBridge.on('menu:share:appmessage', function(argv) {
        //     WeixinJSBridge.invoke("sendAppMessage", obj, function(res) {
        //         WeixinJSBridge.log(res)
        //     });
        // })
        var obj = {
            title: '我是标题',
            link: 'https://flow.clientaccess.10086.cn/activity/flowRedactive/images/shareind.png',
            desc:'我是内容',
            imgUrl: 'https://flow.clientaccess.10086.cn/activity/flowRedactive/images/shareind.png'
        }
        
        // var aaa = {"code":"succ",timestamp:"1593332094","nonceStr":"39afc59b-e3f1-4186-92b3-e0df062d3193",jsapi_ticket:"sM4AOVdWfPE4DxkXGEs8VClKZ9X-9VNgwpeiTFMwPNcmeOfljVx92j79HVbnDk6BAxi5USdOQofou6lkbMiL-g",signature:"0d09c0423eb2d5aaf82aec7353b3157f4eebf9fc","url":"https://rr.ln139.cn/rr/lnwd/myShop/promotShophtml_1579170279659.html?shopid=56691B0DFCB300D0E0530A44020B7C6F","appId":"wx526a8283a50e9a7d"}
        
        // 	wx.config({
        //     appId: aaa.appId,
        //     timestamp: aaa.timestamp,
        //     nonceStr: aaa.nonceStr,
        //     signature: aaa.signature,
        //     jsApiList: [
        //       'checkJsApi',
        //         'onMenuShareTimeline',
        //         'onMenuShareAppMessage',
        //         'onMenuShareQQ',
        //         'onMenuShareWeibo',
        //         'onMenuShareQZone'
        //     ]
        // });
        publicClient.weixin_share(obj)
        // wx.ready(function(){
        //   //分享到朋友圈
        //   wx.onMenuShareTimeline(obj);
        //   //转发
        //   wx.onMenuShareAppMessage(obj);
        //   wx.invoke("shareToExternalContact", {
        //       title: 'title', // 消息的标题
        //       desc: 'desc', // 消息的描述
        //       link: obj.link, // 消息链接
        //       imgUrl: obj.imgUrl // 消息封面
        //       },function(res) {
        //           if (res.err_msg == "shareToExternalContact:ok") {
        //             alert('ok')
        //           }
        //       }
        //   );
        // })
        alert(999)
      //   wx.onMenuShareAppMessage({
      //     title: 'title', // 分享标题
      //     desc: 'desc', // 分享描述
      //     link: this.shareUrl, // 分享链接；在微信上分享时，该链接的域名必须与企业某个应用的可信域名一致
      //     imgUrl: shareimg3, // 分享图标
      //     success: function () {
      //         // 用户确认分享后执行的回调函数
      //         alert('success')
      //     },
      //     cancel: function () {
      //         // 用户取消分享后执行的回调函数
      //         alert('cancel')
      //     }
      // });
      // WeixinJSBridge.ready(function(){
      //   WeixinJSBridge.invoke("shareToExternalContact", {
      //     title: 'title', // 消息的标题
      //     desc: 'desc', // 消息的描述
      //     link: this.shareUrl, // 消息链接
      //     imgUrl: shareimg3 // 消息封面
      //     },function(res) {
      //         if (res.err_msg == "shareToExternalContact:ok") {
      //           alert('ok')
      //         }
      //     }
      // );
      // }
    // })
  }
  </script>
</body>
</html>